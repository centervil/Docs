# å“è³ªç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚¬ã‚¤ãƒ‰

ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€Pythonãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‘ã‘ã®åŒ…æ‹¬çš„ãªå“è³ªç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®æ§‹ç¯‰ã¨é‹ç”¨æ–¹æ³•ã«ã¤ã„ã¦èª¬æ˜ã—ã¾ã™ã€‚å“è³ªæŒ‡æ¨™ã®å¯è¦–åŒ–ã‚’é€šã˜ã¦ã€é–‹ç™ºãƒ—ãƒ­ã‚»ã‚¹ã®é€æ˜æ€§ã‚’é«˜ã‚ã€ç¶™ç¶šçš„ãªæ”¹å–„ã‚’ä¿ƒé€²ã™ã‚‹ã“ã¨ã‚’ç›®çš„ã¨ã—ã¦ã„ã¾ã™ã€‚

## 1. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ç›®çš„ã¨ä¾¡å€¤

### 1.1 å“è³ªç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ç›®çš„

- **é€æ˜æ€§ã®ç¢ºä¿**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®å¥å…¨æ€§ã¨å•é¡Œç‚¹ã‚’å¯è¦–åŒ–
- **æ—©æœŸå•é¡Œæ¤œå‡º**: é–‹ç™ºåˆæœŸæ®µéšã§ã®å•é¡Œã®ç‰¹å®šã¨å¯¾å¿œ
- **ãƒãƒ¼ãƒ æ„è­˜ã®å‘ä¸Š**: å“è³ªæŒ‡æ¨™ã®å…±æœ‰ã«ã‚ˆã‚‹ãƒãƒ¼ãƒ å…¨ä½“ã®å“è³ªæ„è­˜å‘ä¸Š
- **ç¶™ç¶šçš„æ”¹å–„**: ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æã«ã‚ˆã‚‹æ”¹å–„åŠ¹æœã®ç¢ºèª
- **å®¢è¦³çš„ãªåˆ¤æ–­åŸºæº–**: æ„Ÿè¦šã§ã¯ãªããƒ‡ãƒ¼ã‚¿ã«åŸºã¥ãæ„æ€æ±ºå®š

### 1.2 ä¸»è¦ãªå“è³ªæŒ‡æ¨™

#### ã‚³ãƒ¼ãƒ‰å“è³ªæŒ‡æ¨™
- ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸ç‡ï¼ˆå…¨ä½“ãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ï¼‰
- é™çš„è§£æã®è­¦å‘Šæ•°ãƒ»ã‚¨ãƒ©ãƒ¼æ•°
- ã‚³ãƒ¼ãƒ‰è¤‡é›‘åº¦ãƒ¡ãƒˆãƒªã‚¯ã‚¹
- æŠ€è¡“çš„è² å‚µã®å®šé‡è©•ä¾¡

#### ãƒ—ãƒ­ã‚»ã‚¹å“è³ªæŒ‡æ¨™
- ãƒ“ãƒ«ãƒ‰æˆåŠŸç‡
- ãƒ†ã‚¹ãƒˆå®Ÿè¡Œæ™‚é–“
- Issueãƒ»PRè§£æ±ºé€Ÿåº¦
- ãƒ¬ãƒ“ãƒ¥ãƒ¼ç‡ãƒ»ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å¯¾å¿œç‡

#### æˆæœå“è³ªæŒ‡æ¨™
- ãƒã‚°ç™ºç”Ÿç‡ãƒ»è§£æ±ºç‡
- æ©Ÿèƒ½å®Œäº†ç‡
- ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æŒ‡æ¨™
- ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è„†å¼±æ€§æ•°

## 2. ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ§‹ç¯‰ã‚¬ã‚¤ãƒ‰

### 2.1 åŸºæœ¬ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
[CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³] â†’ [ãƒ‡ãƒ¼ã‚¿åé›†ã‚¹ã‚¯ãƒªãƒ—ãƒˆ] â†’ [ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸] â†’ [å¯è¦–åŒ–ãƒ„ãƒ¼ãƒ«]
```

#### å®Ÿè£…ã‚ªãƒ—ã‚·ãƒ§ãƒ³

1. **è»½é‡ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**:
   - ãƒ‡ãƒ¼ã‚¿åé›†: GitHub Actions
   - ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸: JSON/CSV ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆGitHub Pagesï¼‰
   - å¯è¦–åŒ–: é™çš„HTML + JavaScriptï¼ˆChart.jsï¼‰

2. **ãƒ•ãƒ«æ©Ÿèƒ½ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ**:
   - ãƒ‡ãƒ¼ã‚¿åé›†: Jenkins/GitHub Actions
   - ãƒ‡ãƒ¼ã‚¿ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸: ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ï¼ˆSQLite/PostgreSQLï¼‰
   - å¯è¦–åŒ–: Grafana / ã‚«ã‚¹ã‚¿ãƒ ã‚¦ã‚§ãƒ–ã‚¢ãƒ—ãƒª

### 2.2 ãƒ‡ãƒ¼ã‚¿åé›†æ–¹æ³•

#### ãƒ†ã‚¹ãƒˆã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ‡ãƒ¼ã‚¿

pytest-covã‚’ä½¿ç”¨ã—ãŸã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ‡ãƒ¼ã‚¿åé›†:

```bash
pytest --cov=src --cov-report=xml
```

ç”Ÿæˆã•ã‚Œã‚‹coverage.xmlã‚’è§£æã—ã¦ãƒ‡ãƒ¼ã‚¿ã‚’æŠ½å‡º:

```python
import xml.etree.ElementTree as ET

def extract_coverage_data(xml_path='coverage.xml'):
    tree = ET.parse(xml_path)
    root = tree.getroot()
    
    # å…¨ä½“ã‚«ãƒãƒ¬ãƒƒã‚¸
    total_coverage = float(root.attrib.get('line-rate', 0)) * 100
    
    # ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«åˆ¥ã‚«ãƒãƒ¬ãƒƒã‚¸
    module_coverage = {}
    for package in root.findall('.//package'):
        pkg_name = package.attrib.get('name', 'unknown')
        pkg_rate = float(package.attrib.get('line-rate', 0)) * 100
        module_coverage[pkg_name] = pkg_rate
    
    return {
        'total': total_coverage,
        'modules': module_coverage
    }
```

#### é™çš„è§£æãƒ‡ãƒ¼ã‚¿

flake8ã®çµæœã‚’æ§‹é€ åŒ–ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦åé›†:

```bash
flake8 src --output-file=flake8-report.txt
```

pylintã®JSONå½¢å¼ã®å‡ºåŠ›ã‚’åˆ©ç”¨:

```bash
pylint src --output-format=json > pylint-report.json
```

ãƒ‡ã‚³ãƒ¼ãƒ‰ä¾‹:
```python
import json

def extract_pylint_data(json_path='pylint-report.json'):
    with open(json_path, 'r') as f:
        data = json.load(f)
    
    # ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¿ã‚¤ãƒ—ã”ã¨ã®é›†è¨ˆ
    message_counts = {
        'error': 0,
        'warning': 0,
        'convention': 0,
        'refactor': 0
    }
    
    for message in data:
        msg_type = message.get('type', '')
        if msg_type in message_counts:
            message_counts[msg_type] += 1
    
    # ã‚¹ã‚³ã‚¢è¨ˆç®—ï¼ˆpylintã®è©•ä¾¡ã¯10ç‚¹æº€ç‚¹ï¼‰
    if 'score' in data[-1]:
        score = data[-1]['score']
    else:
        score = 0
    
    return {
        'message_counts': message_counts,
        'score': score
    }
```

#### ãƒ—ãƒ­ã‚»ã‚¹ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ‡ãƒ¼ã‚¿

GitHub APIã‚’æ´»ç”¨ã—ãŸãƒ‡ãƒ¼ã‚¿åé›†:

```python
import requests

def fetch_github_metrics(repo, token):
    headers = {
        'Authorization': f'token {token}',
        'Accept': 'application/vnd.github.v3+json'
    }
    
    # PRãƒ‡ãƒ¼ã‚¿å–å¾—
    pr_url = f'https://api.github.com/repos/{repo}/pulls?state=all'
    pr_response = requests.get(pr_url, headers=headers)
    pr_data = pr_response.json()
    
    # Issue ãƒ‡ãƒ¼ã‚¿å–å¾—
    issues_url = f'https://api.github.com/repos/{repo}/issues?state=all'
    issues_response = requests.get(issues_url, headers=headers)
    issues_data = issues_response.json()
    
    # ãƒ‡ãƒ¼ã‚¿è§£æãƒ»é›†è¨ˆå‡¦ç†
    # ...
    
    return {
        'pr_metrics': pr_metrics,
        'issue_metrics': issue_metrics
    }
```

### 2.3 ãƒ‡ãƒ¼ã‚¿ä¿å­˜ã¨å±¥æ­´ç®¡ç†

#### ãƒ•ã‚¡ã‚¤ãƒ«ãƒ™ãƒ¼ã‚¹ã®ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

æ—¥ä»˜ãƒ™ãƒ¼ã‚¹ã®JSONãƒ•ã‚¡ã‚¤ãƒ«:

```
reports/
â”œâ”€â”€ coverage/
â”‚   â”œâ”€â”€ 2025-04-01.json
â”‚   â”œâ”€â”€ 2025-04-02.json
â”‚   â””â”€â”€ ...
â”œâ”€â”€ static-analysis/
â”‚   â”œâ”€â”€ 2025-04-01.json
â”‚   â”œâ”€â”€ 2025-04-02.json
â”‚   â””â”€â”€ ...
â””â”€â”€ process/
    â”œâ”€â”€ 2025-04-01.json
    â”œâ”€â”€ 2025-04-02.json
    â””â”€â”€ ...
```

ã‚µãƒ³ãƒ—ãƒ«JSONæ§‹é€ :

```json
{
  "timestamp": "2025-04-30T10:45:00Z",
  "build_id": "github-actions-123456",
  "coverage": {
    "total": 87.5,
    "modules": {
      "src/core": 92.3,
      "src/utils": 85.1,
      "src/api": 79.8
    }
  },
  "static_analysis": {
    "pylint_score": 8.7,
    "flake8_violations": 12,
    "mypy_errors": 3
  }
}
```

#### ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

SQLiteã‚¹ã‚­ãƒ¼ãƒä¾‹:

```sql
-- ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®ç¨®é¡
CREATE TABLE metric_types (
  id INTEGER PRIMARY KEY,
  name TEXT NOT NULL,
  description TEXT
);

-- ãƒ“ãƒ«ãƒ‰/å®Ÿè¡Œæƒ…å ±
CREATE TABLE builds (
  id INTEGER PRIMARY KEY,
  build_id TEXT NOT NULL,
  timestamp DATETIME NOT NULL,
  branch TEXT,
  commit_hash TEXT
);

-- ãƒ¡ãƒˆãƒªã‚¯ã‚¹å€¤
CREATE TABLE metrics (
  id INTEGER PRIMARY KEY,
  build_id INTEGER REFERENCES builds(id),
  metric_type_id INTEGER REFERENCES metric_types(id),
  value REAL NOT NULL,
  component TEXT,  -- optional for component-specific metrics
  extra JSON       -- additional structured data
);
```

### 2.4 å¯è¦–åŒ–å®Ÿè£…

#### é™çš„HTMLãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

åŸºæœ¬æ§‹é€ :

```html
<!DOCTYPE html>
<html>
<head>
  <title>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå“è³ªãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/luxon@2.0.2"></script>
  <script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-luxon@1.0.0"></script>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <header>
    <h1>ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå“è³ªãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
    <p>æœ€çµ‚æ›´æ–°: <span id="last-updated">Loading...</span></p>
  </header>
  
  <div class="dashboard-grid">
    <!-- ã‚«ãƒãƒ¬ãƒƒã‚¸ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <div class="card">
      <h2>ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸</h2>
      <div class="metric-big">
        <span id="total-coverage">--.-%</span><span class="unit">%</span>
      </div>
      <div class="chart-container">
        <canvas id="coverage-trend-chart"></canvas>
      </div>
    </div>
    
    <!-- é™çš„è§£æã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <div class="card">
      <h2>ã‚³ãƒ¼ãƒ‰å“è³ªã‚¹ã‚³ã‚¢</h2>
      <div class="metric-big">
        <span id="code-quality-score">-.--</span><span class="unit">/10</span>
      </div>
      <div class="chart-container">
        <canvas id="code-quality-chart"></canvas>
      </div>
    </div>
    
    <!-- ãã®ä»–ã®ãƒãƒ£ãƒ¼ãƒˆã¨ãƒ¡ãƒˆãƒªã‚¯ã‚¹ -->
  </div>
  
  <script src="dashboard.js"></script>
</body>
</html>
```

JavaScriptå®Ÿè£…ä¾‹:

```javascript
// dashboard.js
document.addEventListener('DOMContentLoaded', async () => {
  // ãƒ‡ãƒ¼ã‚¿èª­ã¿è¾¼ã¿
  const coverageData = await fetch('./data/coverage-history.json').then(r => r.json());
  const codeQualityData = await fetch('./data/code-quality-history.json').then(r => r.json());
  
  // æœ€æ–°å€¤ã®è¡¨ç¤º
  const latestCoverage = coverageData[coverageData.length - 1];
  document.getElementById('total-coverage').textContent = 
    latestCoverage.total.toFixed(1);
  document.getElementById('last-updated').textContent = 
    new Date(latestCoverage.timestamp).toLocaleString();
  
  // ãƒˆãƒ¬ãƒ³ãƒ‰ãƒãƒ£ãƒ¼ãƒˆæç”»
  const coverageTrendChart = new Chart(
    document.getElementById('coverage-trend-chart'),
    {
      type: 'line',
      data: {
        datasets: [{
          label: 'ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸',
          data: coverageData.map(d => ({
            x: new Date(d.timestamp),
            y: d.total
          })),
          borderColor: '#4CAF50',
          tension: 0.1
        }]
      },
      options: {
        scales: {
          x: {
            type: 'time',
            time: {
              unit: 'day'
            }
          },
          y: {
            min: 0,
            max: 100,
            title: {
              display: true,
              text: 'ã‚«ãƒãƒ¬ãƒƒã‚¸ (%)'
            }
          }
        }
      }
    }
  );
  
  // ãã®ä»–ã®ãƒãƒ£ãƒ¼ãƒˆæç”»
});
```

#### Grafanaã‚’ç”¨ã„ãŸå‹•çš„ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰

1. **ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹è¨­å®š**:
   - SQLiteã¾ãŸã¯PostgreSQLã‚’ãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ã¨ã—ã¦è¨­å®š
   - JSONãƒ•ã‚¡ã‚¤ãƒ«ã®å ´åˆã¯JSON APIãƒ‡ãƒ¼ã‚¿ã‚½ãƒ¼ã‚¹ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’æ´»ç”¨

2. **ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ§‹æˆ**:
   - æ¦‚è¦ãƒ‘ãƒãƒ«: ä¸»è¦ãªå“è³ªæŒ‡æ¨™ã‚’ä¸€è¦§è¡¨ç¤º
   - ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ‘ãƒãƒ«: æ™‚ç³»åˆ—ã§ã®ãƒ¡ãƒˆãƒªã‚¯ã‚¹å¤‰åŒ–
   - ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãƒ‘ãƒãƒ«: ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«/ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ã®è©³ç´°
   - ã‚¢ãƒ©ãƒ¼ãƒˆãƒ‘ãƒãƒ«: é–¾å€¤ã‚’ä¸‹å›ã£ãŸæŒ‡æ¨™ã®è­¦å‘Šè¡¨ç¤º

3. **ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š**:
   - ã‚«ãƒãƒ¬ãƒƒã‚¸ãŒ80%ã‚’ä¸‹å›ã£ãŸå ´åˆã«é€šçŸ¥
   - é™çš„è§£æã‚¨ãƒ©ãƒ¼ãŒ10ä»¶ã‚’è¶…ãˆãŸå ´åˆã«é€šçŸ¥
   - ãƒ“ãƒ«ãƒ‰å¤±æ•—ãŒ2å›é€£ç¶šã—ãŸå ´åˆã«é€šçŸ¥

## 3. CI/CDãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³ã¨ã®çµ±åˆ

### 3.1 GitHub Actionsçµ±åˆ

```yaml
# .github/workflows/quality-dashboard.yml
name: Quality Dashboard Update

on:
  push:
    branches: [ main, develop ]
  schedule:
    - cron: '0 0 * * *'  # æ¯æ—¥å®Ÿè¡Œ

jobs:
  update_dashboard:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v3
      - uses: actions/setup-python@v4
        with:
          python-version: '3.10'
          
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements-dev.txt
          pip install pytest pytest-cov pylint flake8 mypy
          
      - name: Run tests with coverage
        run: pytest --cov=src/ --cov-report=xml
        
      - name: Run static analysis
        run: |
          pylint src/ --output-format=json > pylint-report.json
          flake8 src/ --output-file=flake8-report.txt
          mypy src/ --txt-report mypy-report
          
      - name: Collect GitHub metrics
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: python scripts/collect_github_metrics.py
        
      - name: Process quality data
        run: python scripts/process_quality_data.py
        
      - name: Generate dashboard
        run: python scripts/generate_dashboard.py
        
      - name: Deploy to GitHub Pages
        uses: peaceiris/actions-gh-pages@v3
        with:
          github_token: ${{ secrets.GITHUB_TOKEN }}
          publish_dir: ./dashboard
```

### 3.2 Jenkinsçµ±åˆ

```groovy
// Jenkinsfile
pipeline {
    agent {
        docker {
            image 'python:3.10'
        }
    }
    
    stages {
        stage('Setup') {
            steps {
                sh 'pip install -r requirements-dev.txt'
                sh 'pip install pytest pytest-cov pylint flake8 mypy'
            }
        }
        
        stage('Test') {
            steps {
                sh 'pytest --cov=src/ --cov-report=xml'
                junit 'test-results.xml'
            }
        }
        
        stage('Static Analysis') {
            parallel {
                stage('Pylint') {
                    steps {
                        sh 'pylint src/ --output-format=json > pylint-report.json'
                    }
                }
                stage('Flake8') {
                    steps {
                        sh 'flake8 src/ --output-file=flake8-report.txt'
                    }
                }
                stage('MyPy') {
                    steps {
                        sh 'mypy src/ --txt-report mypy-report'
                    }
                }
            }
        }
        
        stage('Process Quality Data') {
            steps {
                sh 'python scripts/process_quality_data.py'
            }
        }
        
        stage('Update Dashboard') {
            steps {
                sh 'python scripts/generate_dashboard.py'
                publishHTML([
                    allowMissing: false,
                    alwaysLinkToLastBuild: true,
                    keepAll: true,
                    reportDir: 'dashboard',
                    reportFiles: 'index.html',
                    reportName: 'Quality Dashboard'
                ])
            }
        }
    }
    
    post {
        always {
            archiveArtifacts artifacts: 'quality-data/*.json', fingerprint: true
        }
    }
}
```

## 4. ãƒ‡ãƒ¼ã‚¿è§£æã¨æ„æ€æ±ºå®š

### 4.1 ä¸»è¦ãªåˆ†æè¦–ç‚¹

- **ãƒˆãƒ¬ãƒ³ãƒ‰åˆ†æ**: æ™‚é–“çµŒéã«ä¼´ã†å“è³ªæŒ‡æ¨™ã®å¤‰åŒ–
- **ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ†æ**: ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«/ãƒ•ã‚¡ã‚¤ãƒ«ã”ã¨ã®å“è³ªå·®ç•°
- **ç›¸é–¢åˆ†æ**: ç•°ãªã‚‹æŒ‡æ¨™é–“ã®ç›¸é–¢é–¢ä¿‚
- **ç•°å¸¸æ¤œå‡º**: é€šå¸¸ãƒ‘ã‚¿ãƒ¼ãƒ³ã‹ã‚‰ã®é€¸è„±ã®ç‰¹å®š

### 4.2 æ„æ€æ±ºå®šãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯

1. **é–¾å€¤ãƒ™ãƒ¼ã‚¹ã®åˆ¤æ–­**:
   - ã‚«ãƒãƒ¬ãƒƒã‚¸: 80%ä»¥ä¸Šã‚’ç¶­æŒ
   - é™çš„è§£æ: é‡å¤§ãªè­¦å‘Š0ä»¶
   - ãƒ“ãƒ«ãƒ‰æˆåŠŸç‡: 95%ä»¥ä¸Š

2. **ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ™ãƒ¼ã‚¹ã®åˆ¤æ–­**:
   - 3æ—¥é€£ç¶šã§ã‚«ãƒãƒ¬ãƒƒã‚¸ä½ä¸‹: èª¿æŸ»å®Ÿæ–½
   - é™çš„è§£æè­¦å‘Šã®ç¶™ç¶šçš„å¢—åŠ : ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°æ¤œè¨
   - ãƒ“ãƒ«ãƒ‰æ™‚é–“ã®å¢—åŠ å‚¾å‘: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

3. **å“è³ªã‚²ãƒ¼ãƒˆ**:
   - PRãƒãƒ¼ã‚¸æ¡ä»¶: ã‚«ãƒãƒ¬ãƒƒã‚¸ä½ä¸‹ãªã—ã€é™çš„è§£æã‚¨ãƒ©ãƒ¼ãªã—
   - ãƒªãƒªãƒ¼ã‚¹æ¡ä»¶: å…¨ãƒ†ã‚¹ãƒˆé€šéã€ã‚«ãƒãƒ¬ãƒƒã‚¸ç›®æ¨™é”æˆã€ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ã‚¹ã‚­ãƒ£ãƒ³ãƒ‘ã‚¹

### 4.3 è‡ªå‹•ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ

é€±æ¬¡å“è³ªãƒ¬ãƒãƒ¼ãƒˆã®è‡ªå‹•ç”Ÿæˆ:

```python
# scripts/generate_weekly_report.py
import json
import datetime
from pathlib import Path
import matplotlib.pyplot as plt

def generate_weekly_report():
    # æ—¥ä»˜ç¯„å›²ã®æ±ºå®š
    today = datetime.date.today()
    start_date = today - datetime.timedelta(days=7)
    
    # ãƒ‡ãƒ¼ã‚¿åé›†
    coverage_data = []
    for day in range(7):
        date = start_date + datetime.timedelta(days=day)
        date_str = date.strftime('%Y-%m-%d')
        data_path = Path(f'reports/coverage/{date_str}.json')
        
        if data_path.exists():
            with open(data_path, 'r') as f:
                coverage_data.append(json.load(f))
    
    # ã‚°ãƒ©ãƒ•ç”Ÿæˆ
    dates = [d['timestamp'][:10] for d in coverage_data]
    values = [d['coverage']['total'] for d in coverage_data]
    
    plt.figure(figsize=(10, 6))
    plt.plot(dates, values, marker='o')
    plt.title('é€±é–“ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸æ¨ç§»')
    plt.xlabel('æ—¥ä»˜')
    plt.ylabel('ã‚«ãƒãƒ¬ãƒƒã‚¸ç‡ (%)')
    plt.grid(True)
    plt.savefig('reports/weekly/coverage_trend.png')
    
    # HTML ãƒ¬ãƒãƒ¼ãƒˆç”Ÿæˆ
    html = f"""
    <html>
    <head><title>é€±é–“å“è³ªãƒ¬ãƒãƒ¼ãƒˆ</title></head>
    <body>
        <h1>é€±é–“å“è³ªãƒ¬ãƒãƒ¼ãƒˆ ({start_date} ï½ {today})</h1>
        
        <h2>ã‚«ãƒãƒ¬ãƒƒã‚¸æ¨ç§»</h2>
        <img src="coverage_trend.png" alt="ã‚«ãƒãƒ¬ãƒƒã‚¸æ¨ç§»">
        
        <h2>ä¸»è¦æŒ‡æ¨™ã‚µãƒãƒªãƒ¼</h2>
        <table border="1">
            <tr><th>æŒ‡æ¨™</th><th>ç¾åœ¨å€¤</th><th>å…ˆé€±æ¯”</th><th>çŠ¶æ…‹</th></tr>
            <tr>
                <td>ã‚³ãƒ¼ãƒ‰ã‚«ãƒãƒ¬ãƒƒã‚¸</td>
                <td>{values[-1]}%</td>
                <td>{values[-1] - values[0]:.1f}%</td>
                <td>{'ğŸŸ¢' if values[-1] >= 80 else 'ğŸ”´'}</td>
            </tr>
            <!-- ãã®ä»–ã®æŒ‡æ¨™ -->
        </table>
    </body>
    </html>
    """
    
    Path('reports/weekly').mkdir(exist_ok=True, parents=True)
    with open('reports/weekly/index.html', 'w') as f:
        f.write(html)

if __name__ == '__main__':
    generate_weekly_report()
```

## 5. å®Ÿè£…ä¾‹ã¨ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

### 5.1 å°è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‘ã‘æœ€å°æ§‹æˆ

1. **GitHub Actionsãƒ¯ãƒ¼ã‚¯ãƒ•ãƒ­ãƒ¼**:
   - pytest-covã§ã‚«ãƒãƒ¬ãƒƒã‚¸è¨ˆæ¸¬
   - ãƒ¬ãƒãƒ¼ãƒˆã‚’GitHub Pagesã«å…¬é–‹

2. **æœ€å°é™ã®ãƒ¬ãƒãƒ¼ãƒˆæ§‹æˆ**:
   - å…¨ä½“ã‚«ãƒãƒ¬ãƒƒã‚¸ç‡ã¨æ¨ç§»
   - é™çš„è§£æã®è­¦å‘Šæ•°ã¨ãã®æ¨ç§»

### 5.2 ä¸­ãƒ»å¤§è¦æ¨¡ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå‘ã‘æ§‹æˆ

1. **å°‚ç”¨ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹**:
   - æ™‚ç³»åˆ—ãƒ‡ãƒ¼ã‚¿ã®ç¶™ç¶šçš„è“„ç©
   - è¤‡é›‘ãªã‚¯ã‚¨ãƒªã¨å¤šè§’çš„åˆ†æ

2. **Grafanaãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰**:
   - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°
   - ãƒ‰ãƒªãƒ«ãƒ€ã‚¦ãƒ³åˆ†ææ©Ÿèƒ½
   - ãƒãƒ¼ãƒ åˆ¥ãƒ»ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆåˆ¥ãƒ“ãƒ¥ãƒ¼

3. **ã‚¢ãƒ©ãƒ¼ãƒˆé€£æº**:
   - Slack/Teamsã¸ã®é€šçŸ¥
   - å“è³ªä½ä¸‹æ™‚ã®è‡ªå‹•Issueä½œæˆ

### 5.3 ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹

- **ç¶™ç¶šçš„ãªæ”¹å–„ç›®æ¨™è¨­å®š**:
  - é”æˆå¯èƒ½ãªæ®µéšçš„ãªç›®æ¨™è¨­å®š
  - å“è³ªæŒ‡æ¨™ã®å„ªå…ˆé †ä½ä»˜ã‘

- **ãƒãƒ¼ãƒ æ–‡åŒ–ã¨ã®çµ±åˆ**:
  - æœä¼šã§ã®ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ç¢ºèªãƒ«ãƒ¼ãƒãƒ³
  - å“è³ªæ”¹å–„ã®å–ã‚Šçµ„ã¿ã‚’è©•ä¾¡ã™ã‚‹æ–‡åŒ–é†¸æˆ

- **ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹è¨ˆç”»**:
  - å¤ã„ãƒ‡ãƒ¼ã‚¿ã®ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æˆ¦ç•¥
  - ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰è‡ªä½“ã®ãƒ†ã‚¹ãƒˆã¨å“è³ªç¢ºä¿

## 6. å‚è€ƒãƒªã‚½ãƒ¼ã‚¹ã¨ãƒ„ãƒ¼ãƒ«

### 6.1 æ¨å¥¨ãƒ„ãƒ¼ãƒ«

- **ãƒ†ã‚¹ãƒˆï¼†ã‚«ãƒãƒ¬ãƒƒã‚¸**: pytest, pytest-cov, coverage
- **é™çš„è§£æ**: pylint, flake8, mypy, bandit
- **å¯è¦–åŒ–**: Chart.js, Grafana, Metabase
- **CI/CDé€£æº**: GitHub Actions, Jenkins, CircleCI
- **ãƒ‡ãƒ¼ã‚¿ä¿å­˜**: SQLite, PostgreSQL, InfluxDB

### 6.2 å‚è€ƒãƒªã‚½ãƒ¼ã‚¹

- [Google ã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢ãƒªãƒ³ã‚°ãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹ - å“è³ªæŒ‡æ¨™](https://google.github.io/eng-practices/)
- [Grafana Labs - ãƒ¡ãƒˆãƒªã‚¯ã‚¹ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰æ§‹ç¯‰ã‚¬ã‚¤ãƒ‰](https://grafana.com/docs/grafana/latest/)
- [The Joel Test: 12 Steps to Better Code](https://www.joelonsoftware.com/2000/08/09/the-joel-test-12-steps-to-better-code/)
- [The Practical Test Pyramid](https://martinfowler.com/articles/practical-test-pyramid.html)
- [Software Quality Metrics](https://en.wikipedia.org/wiki/Software_quality) 