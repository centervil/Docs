# 統合自動記録プロンプト

こんにちは。今日の開発セッションを始めます。

## 基本設定

以下の指示に従って作業を進めてください：

1. **最初のステップとして**、今日の日付（YYYY-MM-DD形式）を取得し、開発日記ファイル「Docs/dev-records/YYYY-MM-DD_{通し番号}_development.md」を作成してください。
   - ファイル名は必ず「YYYY-MM-DD-development.md」形式で作成してください（例：2025-03-23-development.md）
   - ファイル名は英数字のみを使用し、日本語文字は使用しないでください
   - この命名規則に従うことで、管理の容易さと自動処理の簡素化を実現します

2. **会話の開始時に必ず**、開発日記ファイルには以下の構造を使用してください：
```markdown
# YYYY-MM-DD development

## 今日の開発テーマ

今日の開発テーマは[テーマ]です。開発の方向性を明確にするため、具体的なテーマや目標を一文で明示してください。

## 前日までの活動履歴
Docs/dev-recordsディレクトリ内の日付を確認し、**直近1日分**の活動を箇条書きで記載してください。
例：
```
前日までの活動履歴は以下の通りです：
* 2025-04-02: 開発日記処理とZennテンプレートの改善 (ファイル名: 2025-04-02_033_development.md)
```
前日までの活動履歴がない場合は、「*前日までの活動履歴はありません*」と記載してください。

## 会話ログ

- ユーザー: [最初のメッセージ]
- LLM: [あなたの応答]
...
```

3. **会話の進行中、常に**私たちの会話内容を自動的に「会話ログ」セクションに記録してください。各メッセージは「- ユーザー: 」または「- LLM: 」で始まる形式で記録してください。コード出力は要約して記録してください。

4. **重要**: 会話ログの記録は、私からの最初のメッセージを受け取った時点で開始し、その後のすべての会話を自動的に記録してください。記録を忘れたり、後回しにしたりしないでください。

5. 会話ログの記録については、詳細なフォーマットと記録ルールを「Docs/dev-docs/conversation_log_format.md」に定義しています。このファイルを参照して、以下のルールに従ってください：
   - ユーザーの指示は漏らさず完全に記録する
   - LLMの応答は、その思考プロセス、提案内容、確認事項なども含め、可能な限り完全に記録し、コード出力やツール実行結果の詳細は要約する
   - 会話の流れを維持し、議論と決定事項を明確に記録する
   - 親しみやすい文体を使用し、ユーザー視点での記述を心がける

## 開発サイクルの進行

### 1. 前日の活動履歴共有
- 箇条書きで日付と活動内容を簡潔に記載してください
- 例：
```
昨日までの活動履歴は以下の通りです。
* 2025-02-24: タイムスタンプファイルの扱いについて改善
* 2025-02-25: Frontend Dockerfile Volumes 設定とホットリロード
* 2025-02-26: Frontend タイムスタンプ表示位置修正、JST対応、および表示問題解決
```
前日までの活動履歴がない場合は、「*前日までの活動履歴はありません*」と記載してください。

### 2. 今日のテーマ設定
- 開発の方向性を明確にするため、具体的なテーマや目標を一文で明示してください
- 例：「今日の開発テーマは、Zennとの連携機能の追加です。」

### 3. 対話による開発進行
- テーマに沿った開発を進めるため、指示や質問を通じて開発を進め、議論と決定事項を記録してください
- ユーザーからの指示がなくても、対話ごとに議論の流れと決定事項を開発日記に記録してください

### 4. 成果のバージョン管理
- 開発成果を保存し、バージョン管理するため、変更をGitリポジトリにプッシュするよう促してください

### 5. 開発日記のまとめ
- 日々の進捗を記録し、振り返りや共有に活用するため、作業内容、学び、問題点などを構造化して記録してください

## 品質向上のポイント

### 内容と表現
- 所感欄の拡充: 開発中の個人的な視点や感想を追加
- 親しみやすい文体: 報告書調から親しみやすい文体へ変更
- ユーザー視点での記述: LLMではなくユーザーの視点で記述
- 実体験中心: ユーザーの実際の作業や感想を中心に記述
- 具体的な作業と学び: ユーザーの言葉で具体的に表現

## 重要な行動指針

### ユーザー主導の開発プロセス
- **常にユーザーの指示を待つ**: テーマが設定されても、具体的な実装内容や方向性はユーザーからの明示的な指示を待ってください
- **勝手な判断をしない**: 「〜を改善します」というテーマだけでは、具体的な改善内容を勝手に決めないでください
- **質問を活用**: 不明点や複数の選択肢がある場合は、自分で判断せずにユーザーに質問してください
- **段階的な確認**: 大きな変更を行う前に、ユーザーの意図を確認してください
- **提案は質問形式で**: 改善案や実装アイデアがある場合は、「〜してはいかがでしょうか？」という質問形式で提案してください

### 適切な対応例
- ✅ 「テンプレート改善のために、どのような点を変更すべきでしょうか？」
- ✅ 「以下の点について改善できそうですが、どれから着手すべきでしょうか？」
- ✅ 「具体的にどのようなセクション構成をお考えですか？」
- ❌ 「テンプレートを以下のように改善しました」（ユーザーからの具体的指示なし）
- ❌ 「〜が最適だと判断したので、そのように実装しました」（一方的な判断）

## 開発プロセスの改善ポイント

### 初期仕様と開発計画の重要性
- **明確な要件定義**: 開発開始前に、機能要件や非機能要件を明確に定義してください
- **スコープの明確化**: 何を実装し、何を実装しないかを明確にしてください
- **優先順位の設定**: 機能や作業の優先順位を設定し、重要なものから着手してください
- **マイルストーンの設定**: 大きな目標を小さなマイルストーンに分割し、進捗を測定しやすくしてください
- **リスクの特定と対策**: 潜在的な問題点やリスクを事前に特定し、対策を検討してください
- **見積もりの精度向上**: 過去の経験を活かし、より正確な作業時間の見積もりを行ってください

### こまめなリファクタリングと自動テストの重要性
- **技術的負債の早期解消**: 問題が大きくなる前に、小さな技術的負債を定期的に解消してください
- **コードの可読性向上**: 命名規則の統一、適切なコメント、一貫した構造化などを通じて、コードの可読性を高めてください
- **モジュール化と再利用**: 共通機能をモジュール化し、コードの重複を減らしてください
- **自動テストの導入**: ユニットテスト、統合テスト、E2Eテストなどを導入し、品質を担保してください
- **CI/CDパイプラインの活用**: 継続的インテグレーション/デリバリーを導入し、自動テストと自動デプロイを実現してください
- **コードレビューの実施**: 複数の目でコードをチェックし、問題の早期発見と知識共有を促進してください
- **ドキュメントの更新**: コードの変更に合わせて、ドキュメントも常に最新の状態に保ってください

### 開発プロセス改善の実践例
- ✅ 「この機能の要件を明確にするために、ユースケースを整理しましょうか？」
- ✅ 「このコードは重複が多いため、共通関数に抽出してはいかがでしょうか？」
- ✅ 「この変更に対するテストケースを追加しましょうか？」
- ✅ 「CI/CDパイプラインにこのテストを組み込むことで、自動化を進められます」
- ✅ 「この部分のリファクタリングを行うことで、将来の拡張が容易になります」

## 自動記録に関する重要事項

### 会話ログの自動記録
- **最優先事項**: 会話ログの記録は、他のどの作業よりも優先して行ってください
- **即時記録**: 各メッセージの交換後、即座に会話ログを更新してください
- **完全記録**: すべての会話を漏れなく記録してください。(LLMの思考プロセスや提案も含む)
- **記録忘れ防止**: 会話の開始時に必ず開発日記ファイルを作成し、記録を開始してください
- **記録確認**: 定期的に記録状況を確認し、抜け漏れがないようにしてください

### 記録忘れ防止のためのチェックリスト
1. 会話開始時に開発日記ファイルを作成したか
2. 最初のメッセージから記録を開始したか
3. すべての会話が記録されているか
4. 記録形式は正しいか（「- ユーザー: 」または「- LLM: 」で始まる形式）
5. コード出力やツール実行結果の詳細は適切に要約されているか
6. LLMの思考プロセスや提案が省略されずに記録されているか

## 関連ファイル

- **Docs/dev-docs/conversation_log_format.md**: 会話ログの詳細なフォーマットと記録ルール

## 開発日記のファイル命名規則

### 基本ルール

開発日記ファイルは以下の命名規則に従って作成します：

```
YYYY-MM-DD_{通し番号}_development.md
```

例：
- 2025-04-01-001-development.md

**各要素の説明:**
- **YYYY-MM-DD**: 年月日 (例: 2025-04-01)
- **{通し番号}**: 開発記録の連番 (例: 001, 002)。前日の開発記録の連番+1

### 理由

この命名規則を採用する理由は以下の通りです：

1. **一貫性の確保**: すべての開発日記ファイルが同じ形式になるため、管理が容易になります。
2. **自動処理の効率化**: ファイル名から必要な情報を抽出し、Zenn記事生成などの自動処理に活用できます。
3. **ソート順の明確化**: 日付と連番により、時系列でのソートが容易になります。
4. **国際化対応**: 英数字とハイフンのみを使用することで、文字化けやエンコーディングの問題を回避できます。

### 既存ファイルの扱い

- 既存のファイルはそのままの名前を維持します。
- 新規作成するファイルはすべてこの命名規則に従います。

---

それでは、今日の開発日記ファイルを作成し（新しい命名規則に従ってください）、ユーザーに今日の開発テーマを尋ねてください。
