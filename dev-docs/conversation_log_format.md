# 会話ログのフォーマット標準

このドキュメントは、開発日記における会話ログの標準フォーマットを定義します。

## 基本フォーマット

```markdown
## 会話ログ

- ユーザー: [ユーザーのメッセージ]
- LLM: [LLMの応答（コード出力は要約）]
- ユーザー: [ユーザーのメッセージ]
- LLM: [LLMの応答（コード出力は要約）]
...
```

## 記録ルール

1. **ユーザーの指示**:
   - ユーザーの指示は必ず漏らさず完全に記録する
   - 質問、コマンド、要求などすべての指示を含める

2. **LLMの応答**:
   - LLMの応答は、その思考プロセス、提案内容、確認事項なども含め、可能な限り完全に記録する。
   - コード出力は要約して記録する:
     ```
     (tool_code <ツール名> <引数など> を実行。結果要約: <主要な結果や変更点の要約>)
     ```
     または、コードブロックを直接記述する場合は、簡潔なスニペットに留める。
   - エラーメッセージやコマンドの実行結果も同様に、主要な情報を中心に要約して記録する:
     ```
     (コマンド実行結果: <主要な出力やエラーメッセージの要約>)
     ```
   - LLMが内部的にツールを実行した際の説明（例：「〜のために○○を実行します」）も記録に含める。

3. **会話の流れ**:
   - 会話の本質的な内容（質問、回答、議論）は省略せずに記録する
   - 会話の順序を維持する
   - 対話ごとに議論の流れと決定事項を記録する

4. **記録の品質向上**:
   - 親しみやすい文体を使用する
   - ユーザー視点での記述を心がける
   - 実体験中心の記述にする
   - 具体的な作業と学びを明確に表現する

## 例

```markdown
## 会話ログ

- ユーザー: 新しいファイル `server.py` を作成して、Flaskで簡単なAPIエンドポイントを実装してください。`/hello` にアクセスすると "Hello, World!" と返すように。

- LLM: 承知いたしました。`server.py` を作成し、Flaskを使用して `/hello` エンドポイントを実装します。
まず、Flaskがインストールされているか確認します。もしインストールされていなければ、インストールを促します。
次に、以下のような基本的なFlaskアプリケーションのコードを作成します。

(tool_code default_api.edit_file(target_file='server.py', code_edit='''from flask import Flask

app = Flask(__name__)

@app.route("/hello")
def hello_world():
    return "Hello, World!"''', instructions='Flaskで基本的なHello World APIを作成します。') を実行。結果要約: `server.py` にFlaskアプリケーションを作成)

上記で `server.py` に基本的なAPIを実装しました。

- ユーザー: サーバーを起動するコマンドを教えてください。

- LLM: はい、作成したFlaskサーバーを起動するには、ターミナルで `server.py` があるディレクトリに移動し、以下のコマンドを実行してください:

```bash
flask run
```

デフォルトでは、`http://127.0.0.1:5000/hello` にアクセスすると "Hello, World!" と表示されるはずです。
もしポートが使用されているなどのエラーが出る場合はお知らせください。
```

## 開発日記との統合

会話ログは開発日記の一部として以下の構造に組み込まれます：

```markdown
# YYYY-MM-DD [テーマ]

## 今日の開発テーマ
[テーマの説明]

## 前日までの活動履歴
[前日までの活動履歴を箇条書きで記載]

## 会話ログ
[上記のフォーマットに従った会話ログ]

## 課題と解決策
[課題、解決策、試行錯誤の記録]

## 今後の課題
[未解決の課題や今後の取り組み]

## まとめ
[内容の簡潔なまとめと主要な成果]
```

この構造により、開発プロセスの全体像を把握しやすくなります。