# 2025-04-01 development

## 今日の開発テーマ

今日の開発テーマはDiary-Converterの機能のシンプル化です。開発の方向性を明確にするため、具体的なテーマや目標を一文で明示してください。

## 前日までの活動履歴
前日までの活動履歴は以下の通りです：
* 2025-03-31: development
* 2025-03-30: development
* 2025-03-29: development
* 2025-03-28: development
* 2025-03-27: development

## 会話ログ

- ユーザー: 今日の開発テーマは、Diary-Converterの機能のシンプル化です。
具体的には、現在、以下のような問題があります。
・Testがローカル環境実行とDocker環境実行の2つあり、わかりにくいのでDocker環境実行に統一化したい
・'Diary-Converter/src/diary_converter/diary_converter.py' の、日記生成ロジックが無駄に複雑。日記のテンプレートを渡したら、あとはLLMに生成を任せるようにしたい
・上記を達成するためにも、開発記録のネーミングルールも変えたい（これは具体的に私が指示します）

- LLM: 承知いたしました。「Diary-Converterの機能のシンプル化」を本日の開発テーマとして進めます。提示いただいた課題について、以下の点を理解しました。

1. テスト環境の統一: 現在ローカルとDockerで分かれているテスト実行環境を、Docker環境に一本化したい。
2. 日記生成ロジックの簡略化: diary_converter.py 内の複雑な日記生成ロジックを、テンプレートを基にLLMに任せるシンプルな形にしたい。
3. 開発記録の命名規則変更: 上記の改善に合わせて、開発記録ファイルの命名規則を変更したい。

これらの課題解決に向けて、以下の計画で進めることを提案しました：
1. テスト環境のDockerへの統一
2. 日記生成ロジックの簡略化
3. 開発記録の命名規則変更

- ユーザー: 計画に問題はありません。まずは、テスト環境の統一化からすすめてください

- LLM: テスト環境の統一化を進めました。以下の変更を行いました：

1. Docker環境でユニットテストを実行するための新しいスクリプト `run_docker_unit_tests.sh` を作成しました。
2. Docker環境で統合テストを実行するための新しいスクリプト `run_docker_integration_tests.sh` を作成しました。
3. `run_all_tests.sh` を更新して、すべてのテストをDocker環境で実行するように変更しました。
4. READMEファイルを更新して、テスト環境がDockerに統一されたことを記載しました。

これにより、テスト環境がDockerに統一され、テストの実行方法が簡素化されました。

- LLM: 次に、日記生成ロジックの簡略化を行いました。以下の変更を実施しました：

1. テンプレートファイル `zenn_template.md` を更新し、LLMへの指示を含めるようにしました。
   - テンプレートに `<!-- LLM_INSTRUCTIONS_START -->` と `<!-- LLM_INSTRUCTIONS_END -->` で囲まれた指示セクションを追加
   - この指示セクションにLLMへの変換ルールや出力形式の指定を含めました

2. `TemplateManager` クラスを簡略化しました。
   - 複雑なテンプレート解析処理を削除
   - シンプルな `prepare_template` メソッドを追加し、プレースホルダーの置換のみを行うように変更

3. `DiaryConverter` クラスの `generate_prompt` メソッドを簡略化しました。
   - テンプレートからLLM指示部分を抽出し、それをそのまま使用するように変更
   - 複雑なプロンプト生成ロジックを削除

これらの変更により、日記生成ロジックが大幅に簡略化され、テンプレートを基にLLMに生成を任せるシンプルな形になりました。

- ユーザー: yyyy-mm-dd-[通し番号]-[テーマ名]-[プロジェクト名].md にしてください。'Docs/dev-docs/Auto_Logging_Guide.md' に記載された命名規則も修正して。ファイル名に記載されたテーマ名とプロジェクト名、通し番号から、zenn-template.md のプレースホルダーを埋められるはずです。

- LLM: 開発記録の新しい命名規則 `yyyy-mm-dd-[通し番号]-[テーマ名]-[プロジェクト名].md` に対応しました。以下の変更を行いました：

1. `Docs/dev-docs/Auto_Logging_Guide.md` の命名規則に関する記述を修正しました。
2. `diary_converter.py` を修正しました：
   - 新しい命名規則からテーマ名、プロジェクト名、通し番号を抽出するメソッドを追加しました (`extract_theme_from_filename`, `extract_project_name_from_filename`, `extract_issue_number_from_filename`)。
   - `convert` メソッドを修正し、抽出した情報を使用してテンプレートのプレースホルダーを埋めるようにしました。

