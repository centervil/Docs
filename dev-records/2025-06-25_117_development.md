## 2025-06-24 開発記録: SSML速度調整の検証

### 背景

SSML (`Speech Synthesis Markup Language`) を用いた音声合成において、速度調整のための指示語（例：「ゆっくり話してください」）が音声として出力されてしまう問題が発生しました。これは意図しない結果であり、SSML構造が音声入力指示を適切に制御できるかどうかに疑問が生じています。

### 今日の開発テーマ

Google Gemini APIにおけるSSMLを用いた同一話者内での速度調整が実際に可能であるか、Web調査と実験を通じて検証します。

### 活動計画

1.  **Web調査:**
    *   Google Gemini APIの音声合成機能がSSMLを直接サポートしているかを確認します。
    *   SSMLタグ（特に `<prosody>`）を音声として出力せずに、その指示を反映させる方法を調査します。
    *   `google-generative-ai` ライブラリの関連ドキュメントやサンプルコードを確認します。

2.  **実験と検証:**
    *   Web調査の結果に基づき、`test_tts.py` を修正し、SSMLが意図通りに動作するかを検証します。
    *   SSMLを直接APIに渡す方法、または別の形式でSSMLの情報を渡す必要があるかを確認します。

### これまでの調査結果と次なるステップ

これまでのWeb調査では、Google Gemini APIの音声合成機能はSSMLを直接入力として受け入れるのではなく、自然言語のプロンプトを用いて音声のスタイルや速度などを制御する傾向があることが判明しています。現在の `test_tts.py` の実装では、SSMLの `<prosody>` タグからの指示を自然言語の指示に変換し、それを話すテキストの一部としてプロンプトに含めているため、指示語が音声として読み上げられています。

この問題を解決するため、モデルが指示を音声として出力せず、行動として解釈するような方法を見つける必要があります。Web調査で「システム指示（System Instructions）」という概念が言及されており、これはモデルの振る舞いを制御するために使われるようです。

したがって、次のステップとして、`GenerateContentConfig` と関連するクラスの公式ドキュメントを再確認し、音声生成時にスタイル制御を目的とした「システム指示」や他のパラメータの利用方法について詳しく調査します。具体的には、「`google-generative-ai` GenerateContentConfig system_instruction speech_generation」というクエリでウェブ検索を行い、Gemini APIが提供する音声生成におけるスタイル制御の最適な方法を探します。 