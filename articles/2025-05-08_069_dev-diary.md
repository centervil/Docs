---
title: 開発ガイドのRule化を推進 Pytestベストプラクティスも整備（開発日記 No.069）
emoji: 📚
type: idea
topics: ["開発日記", "自動化", "ドキュメント管理"]
published: false
---

:::message
この記事はgemini-2.5-pro-exp-03-25によって自動生成されています。
:::

## 関連リンク
- [前回の開発日記](https://zenn.dev/centervil/articles/2025-05-07_068_dev-diary)

## はじめに
昨日は `devsecops_guide.md` のRule化を完了し、`project_management_guide.md` のRule化に着手しました。具体的には、各種知識Ruleの作成や、一部専門モードRuleと参照ドキュメントの作成、そして包括的モードRuleの更新を行いました。
本日は、この `project_management_guide.md` の残作業を完了させ、さらに `pytest_best_practices.md` のRule化にも取り組むことを目標としました。可能であれば `quality_dashboard_guide.md` のRule化も進めたいと考えていました。

## 背景と目的
開発プロセスの標準化とさらなる効率化を目指し、各種ガイドドキュメントを知識Rule、モードRule、参照ドキュメントとしてシステムに組み込む作業を継続しています。これらのRuleは、LLMが開発作業をより自律的かつ高品質に実行するための基盤となります。今回の取り組みも、この大きな目標の一環です。

## 検討内容
今日の主な検討事項は、以下のドキュメントのRule化方針です。

1.  **`project_management_guide.md`（残作業分）**:
    *   MCP（Minimum Comprehensible Prototype）利用に関するセクション
    *   テスト戦略に関するセクション
    *   品質管理ダッシュボードに関するセクション
    これらの各セクションについて、どのような知識Rule、モードRule、参照ドキュメントが必要かを検討しました。

2.  **`pytest_best_practices.md`**:
    *   ドキュメント全体をどのようにRule群（知識Rule、モードRule、参照ドキュメント）に分割するか。
    *   知識Ruleとしては、Pytestの基本設定、フィクスチャの扱い方、パラメータ化やマーカーの利用法、モックやパッチのテクニック、アサーションやレポート作成、セキュリティテストの観点などを抽出することを考えました。
    *   モードRuleとしては、これらの知識を活用してテストコードの生成を支援したり、フィクスチャ管理を助けたり、テストコードのリファクタリングや最適化を提案したりするものを想定しました。
    *   参照ドキュメントとしては、具体的な `pytest.ini` の設定例や推奨されるディレクトリ構造、セキュリティテストの実装例などを用意することにしました。

また、これらの新規Rule群を、既存の包括的モードRuleである `mode_development_execution.mdc` とどのように連携させるかについても考慮しました。

## 実装内容
LLMに今日の開発準備を指示した後、昨日の残作業から取り掛かりました。分割案の検討も含め、LLMに自律的な作業進行を促しました。

### 1. `project_management_guide.md` のRule化完了
まず、`project_management_guide.md` の残りのセクションについて、Rule化作業を進めました。

*   **MCP利用に関するRule**: 知識RuleとモードRuleを作成しました。
*   **テスト戦略に関するRule**: 知識Rule、参照ドキュメント（コマンド例、フィクスチャ例、モック例、パラメータ化例）、モードRuleを作成しました。
*   **品質管理ダッシュボードに関するRule**: 知識Rule、参照ドキュメント（GitHub Actionsワークフロー例、レポート生成スクリプト例）、モードRuleを作成しました。

これらの作業完了後、包括的モードRule `mode_development_execution.mdc` を更新し、作成した `project_management_guide.md` 関連のRuleファイル群をGitにコミットしました。

### 2. `pytest_best_practices.md` のRule化
次に、`pytest_best_practices.md` のRule化に着手しました。ここでも、LLMが提示した分割案に沿って作業を進めました。

*   **知識Ruleの作成**:
    *   基本設定
    *   フィクスチャ
    *   パラメータ化/マーカー
    *   モック/パッチ
    *   アサーション/レポート
    *   セキュリティテスト
    の計6つの知識Ruleを作成しました。

*   **モードRuleの作成**:
    *   テスト生成支援
    *   フィクスチャ管理支援
    *   リファクタリング/最適化支援
    の計3つのモードRuleを作成しました。

*   **参照ドキュメントの作成**:
    *   `pytest.ini` の設定例
    *   推奨ディレクトリ構造例
    *   セキュリティテストのコード例
    の計3つの参照ドキュメントを作成しました。

最後に、これらのPytest関連Ruleへの参照を包括的モードRule `mode_development_execution.mdc` に追加し、作成・更新した全てのPytest関連RuleファイルをGitにコミットしました。

## 技術的なポイント
今回の作業における技術的なポイントは、ドキュメントの内容をLLMが解釈し、実際の開発作業に活用できるようなRule形式（知識Rule、モードRule、参照ドキュメント）へと効果的に変換する点にあります。

*   **知識Rule**: ドキュメント内の定義、ベストプラクティス、原則といった静的な情報を抽出・構造化しました。
*   **モードRule**: 特定の開発タスク（例：テストコード生成、フィクス